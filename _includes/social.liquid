{% comment %} Check if a list of profiles to display is defined in _data/socials.yml, otherwise display all by default {% endcomment %}
{% assign profiles_to_display = site.data.socials.display_in_header | default: null %}

{% for social_key_value_pair in site.data.socials %}
  {% assign social_key = social_key_value_pair[0] %}
  {% assign social_value = social_key_value_pair[1] %}

  {% comment %}
    Only proceed if:
    1. The current key is not 'display_in_header' itself.
    2. EITHER no 'display_in_header' list is defined (so we show all known icons by default)
       OR the current key IS in the 'display_in_header' list.
  {% endcomment %}
  {% if social_key != 'display_in_header' %}
    {% if profiles_to_display == null or profiles_to_display contains social_key %}
      {% case social_key %}
        {% when 'acm_id' %}
          <a href="https://dl.acm.org/profile/{{ social_value }}/" title="ACM DL"><i class="ai ai-acm"></i></a>
        {% when 'blogger_url' %}
          <a href="{{ social_value }}" title="Blogger"><i class="fa-brands fa-blogger-b"></i></a>
        {% when 'bluesky_url' %}
          <a href="{{ social_value }}" title="Bluesky"><i class="fa-brands fa-bluesky"></i></a>
        {% when 'dblp_url' %}
          <a href="{{ social_value }}" title="DBLP"><i class="ai ai-dblp"></i></a>
        {% when 'discord_id' %}
          <a href="https://discord.com/users/{{ social_value }}" title="Discord"><i class="fa-brands fa-discord"></i></a>
        {% when 'email' %}
          <a href="mailto:{{ social_value | encode_email }}" title="email"><i class="fa-solid fa-envelope"></i></a>
        {% when 'facebook_id' %}
          <a href="https://facebook.com/{{ social_value }}" title="Facebook"><i class="fa-brands fa-facebook"></i></a>
        {% when 'flickr_id' %}
          <a href="https://www.flickr.com/{{ social_value }}" title="Flickr"><i class="fa-brands fa-flickr"></i></a>
        {% when 'github_username' %}
          <a href="https://github.com/{{ social_value }}" title="GitHub"><i class="fa-brands fa-github"></i></a>
        {% when 'gitlab_username' %}
          <a href="https://gitlab.com/{{ social_value }}" title="GitLab"><i class="fa-brands fa-gitlab"></i></a>
        {% when 'ieee_id' %}
          <a href="https://ieeexplore.ieee.org/author/{{ social_value }}/" title="IEEE Xplore"><i class="ai ai-ieee"></i></a>
        {% when 'inspirehep_id' %}
          <a href="https://inspirehep.net/authors/{{ social_value }}" title="Inspire HEP"><i class="ai ai-inspire"></i></a>
        {% when 'instagram_id' %}
          <a href="https://instagram.com/{{ social_value }}" title="Instagram"><i class="fa-brands fa-instagram"></i></a>
        {% when 'kaggle_id' %}
          <a href="https://www.kaggle.com/{{ social_value }}" title="Kaggle"><i class="fa-brands fa-kaggle"></i></a>
        {% when 'keybase_username' %}
          <a href="https://keybase.io/{{ social_value }}" title="Keybase"><i class="fa-brands fa-keybase"></i></a>
        {% when 'lastfm_id' %}
          <a href="https://www.last.fm/user/{{ social_value }}" title="Last FM"><i class="fa-brands fa-lastfm"></i></a>
        {% when 'lattes_id' %}
          <a href="http://lattes.cnpq.br/{{ social_value }}" target="_blank" title="Lattes"><i class="ai ai-lattes"></i></a>
        {% when 'leetcode_id' %}
          <a href="https://leetcode.com/u/{{ social_value }}/" target="_blank" title="LeetCode"><i class="si si-leetcode"></i></a>
        {% when 'linkedin_username' %}
          <a href="https://www.linkedin.com/in/{{ social_value }}" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
        {% when 'mastodon_username' %}
          <a rel="me" href="https://{{ social_value }}" title="Mastodon"><i class="fa-brands fa-mastodon"></i></a>
        {% when 'medium_username' %}
          <a href="https://medium.com/@{{ social_value }}" title="Medium"><i class="fa-brands fa-medium"></i></a>
        {% when 'orcid_id' %}
          <a href="https://orcid.org/{{ social_value }}" title="ORCID"><i class="ai ai-orcid"></i></a>
        {% when 'osf_id' %}
          <a href="https://osf.io/{{ social_value }}/" title="Open Science Framework"><i class="ai ai-osf"></i></a>
        {% when 'pinterest_id' %}
          <a href="https://www.pinterest.com/{{ social_value }}" title="Pinterest"><i class="fa-brands fa-pinterest"></i></a>
        {% when 'publons_id' %}
          <a href="https://publons.com/a/{{ social_value }}/" title="Publons"><i class="ai ai-publons"></i></a>
        {% when 'quora_username' %}
          <a href="https://www.quora.com/profile/{{ social_value }}" title="Quora"><i class="fa-brands fa-quora"></i></a>
        {% when 'research_gate_profile' %}
          <a href="https://www.researchgate.net/profile/{{ social_value }}/" title="ResearchGate"><i class="ai ai-researchgate"></i></a>
        {% when 'rss_icon' %}
          <a href="{{ site.baseurl }}/feed.xml" title="RSS Feed"><i class="fa-solid fa-square-rss"></i></a>
        {% when 'scholar_userid' %}
          <a href="https://scholar.google.com/citations?user={{ social_value }}" title="Google Scholar"><i class="ai ai-google-scholar"></i></a>
        {% when 'scopus_id' %}
          <a href="https://www.scopus.com/authid/detail.uri?authorId={{ social_value }}" title="Scopus"><i class="ai ai-scopus"></i></a>
        {% when 'semanticscholar_id' %}
          <a href="https://www.semanticscholar.org/author/{{ social_value }}" title="Semantic Scholar"><i class="ai ai-semantic-scholar"></i></a>
        {% when 'spotify_id' %}
          <a href="https://open.spotify.com/user/{{ social_value }}" title="Spotify"><i class="fa-brands fa-spotify"></i></a>
        {% when 'stackoverflow_id' %}
          <a href="https://stackoverflow.com/users/{{ social_value }}" title="Stackoverflow"><i class="fa-brands fa-stack-overflow"></i></a>
        {% when 'strava_userid' %}
          <a href="https://www.strava.com/athletes/{{ social_value }}" title="Strava"><i class="fa-brands fa-strava"></i></a>
        {% when 'telegram_username' %}
          <a href="https://telegram.me/{{ social_value }}" title="telegram"><i class="fa-brands fa-telegram"></i></a>
        {% when 'unsplash_id' %}
          <a href="https://unsplash.com/@{{ social_value }}" title="Unsplash"><i class="fa-brands fa-unsplash"></i></a>
        {% when 'wechat_qr' %}
          <a id="WeChatBtn" title="WeChat"><i class="fa-brands fa-weixin"></i></a>
          <div id="WeChatMod" class="wechat-modal">
            <img src="{{ social_value | prepend: 'assets/img/' | relative_url }}" alt="WeChat QR" id="WeChatQR">
          </div>
          <script defer src="{{ '/assets/js/wechat.js' | relative_url | bust_file_cache }}" type="text/javascript"></script>
        {% when 'whatsapp_number' %}
          <a href="https://wa.me/{{ social_value }}" title="whatsapp"><i class="fa-brands fa-whatsapp"></i></a>
        {% when 'wikidata_id' %}
          <a href="https://www.wikidata.org/wiki/{{ social_value }}" title="Wikidata"><i class="fa-solid fa-barcode"></i></a>
        {% when 'wikipedia_id' %}
          <a href="https://wikipedia.org/wiki/User:{{ social_value }}" title="Wikipedia"><i class="fa-brands fa-wikipedia-w"></i></a>
        {% when 'work_url' %}
          <a href="{{ social_value }}" title="Work"><i class="fa-solid fa-briefcase"></i></a>
        {% when 'x_username' %}
          <a href="https://twitter.com/{{ social_value }}" title="X"><i class="fa-brands fa-x-twitter"></i></a>
        {% when 'youtube_id' %}
          <a href="https://youtube.com/@{{ social_value }}" title="YouTube"><i class="fa-brands fa-youtube"></i></a>
        {% when 'zotero_username' %}
          <a href="https://www.zotero.org/{{ social_value }}" title="Zotero"><i class="ai ai-zotero"></i></a>
        {% else %}
          {% comment %} Handles custom entries if social_value is a map with url, title, logo {% endcomment %}
          {% if social_value.url and social_value.logo %}
            <a href="{{ social_value.url }}" title="{{ social_value.title | default: social_key }}">
              {% assign file_ext = social_value.logo | split: '.' | last %}
              {% if file_ext == 'svg' %}
                <svg>
                  <image xlink:href="{% if social_value.logo contains '://' %}{{ social_value.logo }}{% else %}{{ social_value.logo | relative_url }}{% endif %}" />
                </svg>
              {% else %}
                <img
                  src="{% if social_value.logo contains '://' %}{{ social_value.logo }}{% else %}{{ social_value.logo | relative_url }}{% endif %}"
                  alt="{{ social_value.title | default: social_key }}"
                >
              {% endif %}
            </a>
          {% endif %}
      {% endcase %}
    {% endif %}
  {% endif %}
{% endfor %}
